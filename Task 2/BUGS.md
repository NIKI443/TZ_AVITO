# BUGS.md - Отчет о найденных багах

## 1. Отсутствие валидации sellerID при создании объявления

**Приоритет:** High

**Описание:**  
API не проверяет корректность sellerID при создании объявления. Принимаются любые числовые значения, включая те, которые не соответствуют документации (диапазон 111111-999999).

**Шаги воспроизведения:**

1. Отправить POST запрос на `/api/1/item` с sellerID=123:

```json
{
	"sellerID": 123,
	"name": "Test",
	"price": 1000,
	"statistics": {
		"likes": 10,
		"viewCount": 20,
		"contacts": 30
	}
}
```

**Ожидаемый результат:**

- Статус 400 Bad Request
- Сообщение об ошибке валидации sellerID

**Фактический результат:**

- Статус 200 OK
- Объявление успешно создается

**Влияние:**  
В систему могут попасть данные с некорректными sellerID, что может привести к проблемам при поиске и фильтрации объявлений.

---

## 2. Принятие отрицательных значений в числовых полях

**Приоритет:** High

**Описание:**  
API принимает отрицательные значения в полях, которые должны быть только положительными (price, likes, viewCount, contacts).

**Шаги воспроизведения:**

1. Отправить POST запрос с отрицательными значениями:

```json
{
	"sellerID": 123456,
	"name": "Test",
	"price": -100,
	"statistics": {
		"likes": -10,
		"viewCount": -20,
		"contacts": -30
	}
}
```

**Ожидаемый результат:**

- Статус 400 Bad Request
- Сообщение о некорректных значениях

**Фактический результат:**

- Статус 200 OK
- Объявление успешно создается

**Влияние:**  
Некорректные данные в системе (отрицательные цены, отрицательное количество лайков и просмотров).

---

## 3. Некорректная обработка sellerID=0 и sellerID=-2 в GET запросах

**Приоритет:** High

**Описание:**  
GET запросы на `/api/1/{sellerID}/item` принимают и обрабатывают sellerID=0 и sellerID=-2, хотя такие значения не должны считаться валидными идентификаторами продавцов.

**Шаги воспроизведения:**

1. Отправить GET запрос на `/api/1/0/item`
2. Отправить GET запрос на `/api/1/-2/item`

**Ожидаемый результат:**

- Статус 400 Bad Request для обоих запросов
- Сообщение о некорректном sellerID

**Фактический результат:**

- Статус 200 OK для обоих запросов
- Возвращаются существующие объявления

**Влияние:**  
Нарушение целостности данных и потенциальные проблемы при фильтрации объявлений по sellerID.

---

## 4. Разные форматы ошибок при невалидных sellerID

**Приоритет:** Medium

**Описание:**  
API возвращает разные форматы ошибок в зависимости от типа невалидного sellerID.

**Шаги воспроизведения:**

1. Отправить GET запрос на `/api/1/abc/item` (текстовый sellerID)
2. Отправить GET запрос на `/api/1/!@#%$/item` (спецсимволы)

**Ожидаемый результат:**

- Одинаковый формат ошибки для всех невалидных случаев
- Статус 400 Bad Request

**Фактический результат:**

- Для "abc": `{"result": {"message": "...", "messages": {}}, "status": "400"}`
- Для "!@#%$": `{"message": "route /api/1/!@ not found", "code": 400}`

**Влияние:**  
Усложняет обработку ошибок на клиентской стороне.

---

## 5. Некорректное кодирование спецсимволов в сообщениях об ошибках

**Приоритет:** Low

**Описание:**  
При передаче ID с кириллицей и спецсимволами в сообщении об ошибке отображаются закодированные символы.

**Шаги воспроизведения:**

1. Отправить GET запрос на `/api/1/item/fb32а45f-b394-402а-ас54-е1е62bb9987!`

**Ожидаемый результат:**

- Читаемое сообщение об ошибке
- Корректное отображение кириллицы и спецсимволов

**Фактический результат:**

```
"ID айтема не UUID: fb32%D0%B045f-b394-402%D0%B0-%D0%B0%D1%8154-%D0%B51%D0%B562bb9987!"
```

**Влияние:**  
Пользователю сложно понять, в чем именно ошибка.

---
